# ============================================================
# EIML-v1 configuration (SOAP + EIML scaling)
# ============================================================
# Modes:
#   - "soap" : standard SOAP in absolute coordinates (needs soap.rcut)
#   - "eiml" : EIML-scaled SOAP (reduced coords + dynamic cutoff + adaptive width)
#
# NOTE:
#   EIML-v1 does NOT use SAFT thermodynamic identity (epsilon/m/etc.).
#   Those will come later in EIML-v2 / regression stages.
# ============================================================

mode: eiml   # "soap" or "eiml"

# ------------------------------------------------------------
# Structure / trajectory input
# ------------------------------------------------------------
structure:
  input: water.xyz      # Path to structure or trajectory file (ASE-readable)
  format: xyz           # ASE format (null = auto-detect)
  index: 0              # 0 = first frame, -1 = last, ":" = all frames
  # type_map:           # only needed for formats that use numeric types (LAMMPS)
  #   "1": H
  #   "2": O

# ------------------------------------------------------------
# SOAP hyperparameters (geometry basis)
# ------------------------------------------------------------
soap:
  species: ["H", "O"]   # Chemical species present in the system

  # rcut is REQUIRED in "soap" mode
  # rcut may be omitted/null in "eiml" mode because cutoff becomes dynamic
  rcut: null            # e.g. 5.0 for mode="soap"; keep null for mode="eiml"

  nmax: 8               # Number of radial basis functions
  lmax: 6               # Maximum angular momentum
  sigma: 0.5            # SOAP Gaussian width in Å (ONLY used in mode="soap")
                        # In mode="eiml", width is set by eiml.omega_rel * eiml.sigma_ref

  periodic: false       # Use periodic boundary conditions (requires cell in structure)
  average: "off"        # "off", "inner", "outer"
                        # Must be quoted, otherwise YAML may treat off/true/false specially
  sparse: false         # Return sparse vectors (dscribe option)

# ------------------------------------------------------------
# EIML parameters (scale-informed geometry)
# ------------------------------------------------------------
eiml:
  # Molecular/segment size scale σ (Å):
  # - for one-component liquids: set sigma
  # - for mixtures: you MAY later provide sigma_by_species (optional)
  sigma: 3.0

  # Dimensionless cutoff multiplier:
  #   R_cut = k_rcut * sigma_ref
  # Typical: 2.5–3.5 (captures ~2–3 solvation shells depending on liquid)
  k_rcut: 2.5

  # Reduced Gaussian width ω* (dimensionless):
  #   omega_abs = omega_rel * sigma_ref
  # Typical: 0.10–0.15
  omega_rel: 0.10

  # Optional: per-species σ for mixtures or center-dependent scaling
  # sigma_by_species:
  #   O: 3.0
  #   H: 2.5

  # ----------------------------------------------------------
  # EIML-v1.1: epsilon-based channel weighting (optional)
  # ----------------------------------------------------------
  enable_weighting: true
  # Raw per-species importance (must be positive). Normalized internally.
  epsilon:
    O: 1.5
    H: 0.5
  # Damping exponent alpha in (0, 1]; smaller -> weaker effect (more SOAP-like)
  epsilon_alpha: 0.5
# ------------------------------------------------------------
# Output control
# ------------------------------------------------------------
output:
  pool: mean            # null -> per-atom descriptors, mean -> global average, sum -> global sum
  file: eiml_features   # output path base (extension enforced by save.py)
  split_identity: false # in v1, keep false (identity/metadata splitting comes later)
